<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>JsUnit Tests</title>
  <link rel="stylesheet" type="text/css" href="../css/jsUnitStyle.css">
  <script type="text/javascript" src="../app/jsUnitCore.js"></script>
  <script type="text/javascript" src="../../../web-app/js/jquery-1.6.1.min.js"></script>
  <script type="text/javascript" src="../../../web-app/js/jquery-ui-1.8.13.custom.min.js"></script>
  <script type="text/javascript" src="../../../web-app/js/jquery.ui.datepicker-de.js"></script>
  <script type="text/javascript" src="../../../web-app/js/init.js"></script>
  <script type="text/javascript" src="../../../web-app/js/scripts.js"></script>
  <script type="text/javascript">//<![CDATA[
  SPRINGCRM.addMessages({
      search: "Suchen",
      dateFormat: "dd.MM.yyyy",
      timeFormat: "HH:mm"
  });

  function testFormatDate() {
      d = new Date(2011, 9 - 1, 8, 6, 5, 0, 0);
      assertEquals("08.09.2011 06:05", $.formatDate(d));
      assertEquals("08.09.2011", $.formatDate(d, "date"));
      assertEquals("06:05", $.formatDate(d, "time"));
      assertEquals("08.09.2011 06:05", $.formatDate(d, "datetime"));

      assertEquals("8.9.2011 06:05", $.formatDate(d, null, "d.M.yyyy HH:mm"));
      assertEquals("8.9.11 06:05", $.formatDate(d, null, "d.M.yy HH:mm"));
      assertEquals("8.9.2011 6:5", $.formatDate(d, null, "d.M.yyyy H:m"));

      assertEquals("09/08/2011 06.05", $.formatDate(d, null, "MM/dd/yyyy HH.mm"));
  }
  
  function testParseDate() {
      var d,
          e;

      d = new Date(2011, 9 - 1, 10, 15, 30, 0, 0);
      assertEquals(d.getTime(), $.parseDate("10.09.2011 15:30").getTime());
      assertEquals(d.getTime(), $.parseDate("10.9.2011 15:30").getTime());

      d = new Date(2011, 9 - 1, 8, 6, 5, 0, 0);
      assertEquals(d.getTime(), $.parseDate("8.9.2011 6:05").getTime());
      assertEquals(d.getTime(), $.parseDate("8.9.2011 6:5").getTime());
      assertEquals(d.getTime(), $.parseDate("08.9.2011 6:5").getTime());
      assertEquals(d.getTime(), $.parseDate("8.09.2011 6:5").getTime());
      assertEquals(d.getTime(), $.parseDate("8.9.2011 06:5").getTime());
      assertEquals(d.getTime(), $.parseDate("8.9.11 6:05").getTime());
      assertEquals(d.getTime(), $.parseDate("2011/09/08 06:05", null, "yyyy/MM/dd HH:mm").getTime());
      assertEquals(d.getTime(), $.parseDate("2011/9/8 6:5", null, "yyyy/MM/dd HH:mm").getTime());
      assertEquals(d.getTime(), $.parseDate("2011/08/09 06:05", null, "yyyy/dd/MM HH:mm").getTime());
      assertEquals(d.getTime(), $.parseDate("2011/8/9 6:5", null, "yyyy/dd/MM HH:mm").getTime());
      assertEquals(d.getTime(), $.parseDate("2011-09-08 06:05", null, "yyyy-MM-dd HH:mm").getTime());
      assertEquals(d.getTime(), $.parseDate("2011-9-8 6:5", null, "yyyy-MM-dd HH:mm").getTime());
      assertEquals(d.getTime(), $.parseDate("2011-09-08 06:05", null, "yy-M-d H:m").getTime());
      assertEquals(d.getTime(), $.parseDate("2011-9-8 6:5", null, "yy-M-d H:m").getTime());

      d = new Date(2011, 1 - 1, 1, 0, 0, 0, 0);
      assertEquals(d.getTime(), $.parseDate("2011", null, "yyyy").getTime());
      assertEquals(d.getTime(), $.parseDate("11", null, "yyyy").getTime());

      d = new Date(2011, 9 - 1, 8, 0, 0, 0, 0);
      assertEquals(d.getTime(), $.parseDate("08.09.2011", "date").getTime());
      assertEquals(d.getTime(), $.parseDate("8.9.2011", "date").getTime());
      assertEquals(d.getTime(), $.parseDate("8.9.11", "date").getTime());

      d = new Date(1970, 1 - 1, 1, 5, 2, 0, 0);
      assertEquals(d.getTime(), $.parseDate("05:02", "time").getTime());
      assertEquals(d.getTime(), $.parseDate("5:02", "time").getTime());
      assertEquals(d.getTime(), $.parseDate("5:2", "time").getTime());

      d = new Date(2011, 9 - 1, 10, 15, 30, 0, 0);
      assertNotEquals(d.getTime(), $.parseDate("09.10.2011 15:30").getTime());
      try {
          $.parseDate("10/09/2011 15:30");
          fail("Expected invalid date exception.");
      } catch (e) {}
      try {
          $.parseDate("10.09.2011 15:30", "date");
          fail("Expected invalid date exception.");
      } catch (e) {}
      try {
          $.parseDate("10.09.2011 15:30", "time");
          fail("Expected invalid date exception.");
      } catch (e) {}

      assertNull($.parseDate(null));
      assertNull($.parseDate(""));
      assertNull($.parseDate("     "));
  }
  //]]></script>
</head>

<body>
  <h1>JsUnit Tests</h1>
  
  <p>This page contains tests for the JsUnit Framework. To see them, take a look at the source.</p>
</body>
</html>
