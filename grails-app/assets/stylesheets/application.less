/*
 * application.less
 *
 * Copyright (c) 2011-2016, Daniel Ellermann
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */


// Bootstrap core variables and mixins
@import "bootstrap/variables";
@import "bootstrap/mixins";

// Reset and dependencies
@import "bootstrap/normalize";

// Core Bootstrap CSS
@import "bootstrap/scaffolding";
@import "bootstrap/type";
@import "bootstrap/grid";
@import "bootstrap/tables";
@import "bootstrap/forms";
@import "bootstrap/buttons";

// Components
@import "bootstrap/component-animations";
@import "bootstrap/dropdowns";
@import "bootstrap/button-groups";
@import "bootstrap/input-groups";
@import "bootstrap/navs";
@import "bootstrap/navbar";
@import "bootstrap/pagination";
@import "bootstrap/alerts";
@import "bootstrap/list-group";
@import "bootstrap/panels";
@import "bootstrap/wells";
@import "bootstrap/close";

// Components w/ JavaScript
@import "bootstrap/modals";
@import "bootstrap/popovers";

// Utility classes
@import "bootstrap/utilities";
@import "bootstrap/responsive-utilities";

// FontAwesome
@import "font-awesome/variables";
@import "font-awesome/mixins";
@import "font-awesome/path";
@import "font-awesome/core";
@import "font-awesome/larger";
@import "font-awesome/animated";
@import "font-awesome/icons";

// Bootstrap extensions
@import "bootstrap/datepicker";
@import "bootstrap/fileinput.css";

// Selectize
@import "selectize/selectize.bootstrap3";
@import "selectize/selectize-disable-options";
@import "selectize/selectize-redefinitions";

// Tools
@import "js-calc/variables";
@import "js-calc/core";
@import "vat-calc/variables";
@import "vat-calc/core";

// Application variables and mixins
@import "_variables";
@import "_mixins";

// Page parts
@import "_header";
@import "_bars";
@import "_footer";

// Component redefinitions
@import "_nav";
@import "_lists";
@import "_forms";

// Print
@import "_print";


//===============================================
//
// Page components
//
//===============================================

@media (min-width: @screen-sm-min) {
  body > .container {
    padding-bottom: (@grid-gutter-width / 2);
    padding-top: (@grid-gutter-width / 2);
  }
}

.inner-container {
  margin: 0 (-@grid-gutter-width / 2);
  padding: (@navbar-margin-bottom / 2) (@grid-gutter-width / 2) 0;

  @media (max-width: @screen-xs-max) {
    margin-top: @navbar-height;
    padding-top: 0;
  }
  @media (min-width: @screen-sm-min) {
    #gradient .vertical(#EEE, #FFF);
    min-height: 400px;
  }
}

.spinner {
  color: @spring-green-base;
  cursor: pointer;
  display: none;
  height: @spinner-size;
  line-height: @spinner-size;
  left: 50%;
  margin-left: (-@spinner-size / 2);
  margin-top: (-@spinner-size / 2);
  position: fixed;
  text-align: center;
  top: 50%;
  width: @spinner-size;
  z-index: 50000;

  .fa {
    font-size: (@spinner-size - 5px);
    line-height: (@spinner-size - 5px);
  }
}


//===============================================
//
// Default style rewrites
//
//===============================================

// typography
h1 {
  margin-top: 0;
}
h2 {
  margin-bottom: @line-height-computed;
}

// button collections and button groups
.buttons .btn {
  margin-top: (@line-height-computed / 2);
}
.btn-group-justified {
  > a + a {
    border-left: none;
  }
}
.letter-bar {
  margin-bottom: @line-height-computed;
}

// dropdowns
.dropdown-menu {
  > .item-separated {
    margin-top: (@line-height-computed / 2);
  }
  .fa {
    width: 1.5em;
  }
}
.dropdown-header {
  border-bottom: 1px solid @gray-lighter;
  font-size: @font-size-base;
  margin-top: (@line-height-computed / 2);
  padding-bottom: @padding-small-vertical;

  &:first-child {
    margin-top: 0;
  }
}

// popovers
.popover-variant(success);
.popover-variant(info);
.popover-variant(warning);
.popover-variant(danger);


//===============================================
//
// Other styles
//
//===============================================

.bubbling-icon {
  .transition(all 250ms ease-out);
  display: inline-block;

  &:hover, &:active, &:focus {
    outline: none;
  }
  &:hover {
    .scale(@bubbling-icon-scale);
  }
}

// toolbars below textareas
.textarea-container {
  > textarea {
    .transition(border-radius .5s; );
  }
  &.focus > textarea {
    border-bottom-right-radius: 0;
  }
}
.textarea-toolbar {
  display: none;
}
.textarea-toolbar-content {
  border: 1px solid @input-border;
  border-bottom-left-radius: @border-radius-small;
  border-bottom-right-radius: @border-radius-small;
  border-top: none;
  display: table;
  margin-left: auto;

  button {
    background: transparent;
    border: none;
    color: @input-color;
    display: table-cell;
    font-size: @font-size-large;
    height: @input-height-small;
    padding: 0 @padding-small-horizontal;
    vertical-align: middle;

    &:hover {
      color: @link-hover-color;
    }
  }
  .selectize-control {
    display: table-cell;
    font-size: 0;
    vertical-align: middle;
  }
  .selectize-input {
    border-bottom: none;
    border-left: none;
    border-radius: 0;
    border-top: none;
    font-size: @font-size-small;
    height: @input-height-small;
    line-height: @line-height-small;
    min-height: 0;
    padding: @padding-small-vertical @padding-small-horizontal;
  }
  .selectize-dropdown {
    font-size: @font-size-small;
  }
}

.markdown-help-text {
  font-size: @font-size-small;
  margin-bottom: 0;

  pre {
    margin: 0;
  }
}

.html-content {
  dl, ol, ul, p {
    &:last-child {
      margin-bottom: 0;
    }
  }
  table:extend(.table all) {
    > thead > tr > th {
      text-align: center;
    }
    td, th {
      border-left: 1px solid @table-border-color;

      &:first-child {
        border-left: none;
      }
    }
  }
}

// removed since version 2.0.5 because it offsets the icon 1-2 pixels down
//.fa {
//  transform: translate(0, 0); // ensures no half-pixel rendering in firefox
//}

// dialogs
.modal-body header {
  background: transparent;    // reset background in data-forms
  font-weight: normal;
}

// Bootstrap file input redefinitions
.file-preview {
  padding: (@grid-gutter-width / 2);
}
.file-preview-thumbnails {
  .clearfix();
}
.file-preview-frame-image {
  .box-shadow(none);
  border: none;
  display: block;
  float: none;
  height: auto;
  margin: 0;
  padding: 0;

  &:hover {
    .box-shadow(none);
  }
}
.file-caption-name {
  .file-preview & {
    display: block;
    padding-right: 0;
    text-align: center;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .kv-fileinput-caption & {
    word-break: break-all;
    word-wrap: break-word;
  }
}
.file-preview-status, .file-error-message {
  word-break: break-all;
  word-wrap: break-word;
}
.file-other-error {
  text-align: inherit;
}
.fileinput-remove {
  margin-top: 10px;
}

// tools
@media (max-width: @screen-sm-max) {
  .navbar-default .navbar-nav > li > .tool-popup {
    left: auto;
    right: 0;
  }
}
@media (max-width: @screen-md-max) {
  .navbar-default .navbar-nav > li > .vat-calculator-popup {
    left: auto;
    right: 0;
  }
}
.vatcalc-calculator-container {
  display: block;
  padding: 5px (@grid-gutter-width / 2);
  width: 420px;
}
